import"./base2.js";document.addEventListener("DOMContentLoaded",function(){const d=document.getElementById("registration-form"),l={login:{input:document.getElementById("login-input"),error:document.getElementById("login-error-msg"),label:document.getElementById("login-label"),icon:document.getElementById("login-icon")},firstName:{input:document.getElementById("first-name"),error:document.getElementById("first-name-error-msg"),label:document.getElementById("first-name-label")},lastName:{input:document.getElementById("last-name"),error:document.getElementById("last-name-error-msg"),label:document.getElementById("last-name-label")},phone:{input:document.getElementById("phone"),error:document.getElementById("phone-error"),label:document.getElementById("phone-label")},password:{input:document.getElementById("password"),error:document.getElementById("password-error"),label:document.getElementById("password-label")},confirmPassword:{input:document.getElementById("confirm-password"),error:document.getElementById("confirm-password-error"),label:document.getElementById("confirm-password-label")}};function s(r,t=()=>!0){const{input:e,error:o,label:n,icon:a}=r;return!e.value.trim()||!t(e.value)?(o.classList.remove("hidden"),e.classList.remove("border-gray-300","dark:border-gray-700","focus:ring-blue-400"),e.classList.add("bg-red-50","border-red-500","text-red-900","placeholder-red-700","focus:ring-red-500","focus:border-red-500"),n.classList.remove("text-gray-900","dark:text-white","text-text-light","dark:text-text-dark"),n.classList.add("text-red-700","dark:text-red-500"),a&&(a.classList.remove("text-gray-500","dark:text-gray-400"),a.classList.add("text-red-500")),!0):!1}function i(r){const{input:t,error:e,label:o,icon:n}=r;e.classList.add("hidden"),t.classList.remove("bg-red-50","border-red-500","text-red-900","placeholder-red-700","focus:ring-red-500","focus:border-red-500"),t.classList.add("border-gray-300","dark:border-gray-700","focus:ring-blue-400"),o.classList.remove("text-red-700","dark:text-red-500"),o.classList.add("text-gray-900","dark:text-white","text-text-light","dark:text-text-dark"),n&&(n.classList.remove("text-red-500"),n.classList.add("text-gray-500","dark:text-gray-400"))}function c(r){let t=r.target,e=t.value;requestAnimationFrame(function(){e.length>18?e=e.slice(0,-1):e.startsWith("+7")?e="+7 ("+e.slice(2).replace(/\D/g,""):e.startsWith("+")?e="+"+e.slice(0).replace(/\D/g,""):e.startsWith("9")?e="+7 ("+e.slice(0).replace(/\D/g,""):e.startsWith("8")?e="+7 ("+e.slice(1).replace(/\D/g,""):!e.startsWith("+7")&&!e.startsWith("8")&&!e.startsWith("9")&&(e=e.slice(0,-1)),console.log("На выходе первых преобразований = "+e+" ДЛИНА + "+e.length),e.length<=7?(e=e.slice(0,7),console.log("1= "+e+" Длинна = "+e.length)):e.length<=10?(e=e.slice(0,7)+") "+e.slice(7,10),console.log("2= "+e+" Длинна = "+e.length)):e.length<13?(e=e.slice(0,7)+") "+e.slice(7,10)+"-"+e.slice(10,12),console.log("3= "+e+" Длинна = "+e.length)):e.length<15&&(e=e.slice(0,7)+") "+e.slice(7,10)+"-"+e.slice(10,12)+"-"+e.slice(12,14),console.log("4= "+e+" Длинна = "+e.length)),t.value=e})}l.phone.input.addEventListener("input",c),d.addEventListener("submit",function(r){let t=!1;t|=s(l.login),t|=s(l.firstName),t|=s(l.lastName),t|=s(l.phone,e=>e.replace(/\D/g,"").length>=10),t|=s(l.password,e=>e.length>=5),t|=s(l.confirmPassword,()=>l.confirmPassword.input.value===l.password.input.value),t&&r.preventDefault()}),Object.values(l).forEach(r=>{r.input.addEventListener("input",()=>{r.input.value.trim()!==""&&i(r)})})});
