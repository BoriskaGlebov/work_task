{% extends 'file_creator/base.html' %}
{% load static %}
{% block title %}
    –ó–∞–º–µ—Ç–∫–∏
{% endblock %}
{% block body %}


    <div class="container mx-auto py-6 px-4 space-y-4">
        <div id="server-error" class="hidden common_error"
             role="alert">
            <svg class="shrink-0 inline size-5 md:size-7 me-3" aria-hidden="true"
                 xmlns="http://www.w3.org/2000/svg"
                 fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"></path>
            </svg>
            <span class="sr-only">Info</span>
            <div>
                <span class="!font-bold">Danger alert!</span>
                <p>Change a few things up and try submitting again.</p>
            </div>
        </div>
        <div id="server-info" class="hidden common_info"
             role="info">
            <svg class="shrink-0 inline size-5 md:size-7 me-3" aria-hidden="true"
                 xmlns="http://www.w3.org/2000/svg"
                 fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"></path>
            </svg>
            <span class="sr-only">Info</span>
            <div>
                <span class="!font-bold">Info alert!</span>
                <h3 class="text-text dark:text-text-dark">–°–æ–æ–±—â–µ–Ω–∏–µ</h3>
                <p class="text-text dark:text-text-dark">Change a few things up and try submitting again.</p>
                <div id="btn-div" class="flex justify-center gap-3 mt-3">

                </div>
            </div>
        </div>

        <h2 class="text-center">üìå –ú–æ—è –¥–æ—Å–∫–∞</h2>
        <!-- Header -->
        <div class="flex justify-between items-center mb-4">
            <div class="flex gap-2">
                <button id="btn-notes" class="btn-submit">–°—Ç–∏–∫–µ—Ä—ã
                </button>
                <button id="btn-tasks" class="btn-submit">–ó–∞–¥–∞—á–∏
                </button>
            </div>
        </div>

        <!-- Notes Board -->
        <div id="note-board"
             class="relative border-b-2 border-b-accent min-h-[25vh] flex flex-wrap gap-4 p-4 justify-start">

            {% csrf_token %}
            <!-- –∫–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∏–∫–µ—Ä–æ–≤ -->
        </div>

        <!-- Tasks Board -->
        <div id="task-board"
             class=" grid grid-cols-1 sm:grid-cols-2  lg:grid-cols-3 gap-4 min-h-[200px] transition-opacity">

            <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ -->
            <div id="task-modal" class="fixed inset-0 backdrop-blur-xs flex items-center justify-center hidden z-30">
                <form id="task-form" class="form-style relative">
                    <button id="close-modal"
                            class="absolute top-2 right-3 text-gray-500 hover:text-gray-700 text-xl">
                        &times;
                    </button>

                    <h2 class="text-center">–ó–∞–¥–∞—á–∞</h2>
                    <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" required
                           class="correct_input"/>

                    <textarea name="desc" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ..."
                              class="correct_input"></textarea>

                    <label class="correct_label">
                        –°—Ä–æ–∫ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
                    <input type="date" name="deadline"
                           class="correct_input"/>


                    <label class="correct_label">
                        –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
                    <select name="priority"
                            class="correct_input">
                        <option value="">-</option>
                        <option value="low">üë®‚Äçü¶º –ù–∏–∑–∫–∏–π</option>
                        <option value="medium">üö∂‚Äç‚ôÇÔ∏è –°—Ä–µ–¥–Ω–∏–π</option>
                        <option value="high">üî•üèÉ‚Äç‚ôÇÔ∏è–í—ã—Å–æ–∫–∏–π</option>
                    </select>


                    <select name="assignee" id="assignee-select" class="correct_input">
                        <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è --</option>

                    </select>

{#                    <input type="text" name="tags" placeholder="–¢–µ–≥–∏ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)"#}
{#                           class="correct_input"/>#}
                    <select name="tags" id="tags-select" class="correct_input" multiple placeholder="–í—ã–±–µ—Ä–∏—Ç–µ–≤–≤–≤ –∏–ª–∏ –≤–≤–µ–¥–∏—Ç–µ —Ç–µ–≥–∏..."></select>


                    <label class="correct_label">
                        <input type="checkbox" name="done"/>
                        –í—ã–ø–æ–ª–Ω–µ–Ω–æ
                    </label>

                    <div class="flex justify-end gap-2 mt-4">
                        <button type="button" id="cancel-btn"
                                class="btn-cancel">–û—Ç–º–µ–Ω–∞
                        </button>
                        <button type="submit" class="btn-submit">
                            –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                        </button>
                    </div>
                </form>

            </div>


        </div>
    </div>

    <!-- Add button -->
    <button id="add-card"
            class="add-button">
        +
    </button>

{% endblock %}
{% block extra_js %}
    {% if VITE_DEV_MODE %}
        <script type="module" src="http://localhost:5173/src/stickers/js/start.js"></script>
    {% else %}
        <script type="module" crossorigin src="{% static 'stickers/js/start.js' %}"></script>
    {% endif %}
    <script>
        {% if user.first_name %}
            window.username = "{{ user.first_name }}";
        {% elif user.username %}
            window.username = "{{ user.username }}";
        {% else %}
            window.username = "–ì–æ—Å—Ç—å";
        {% endif %}
        window.notes_data = JSON.parse('{{ notes_data|escapejs }}');
        window.username_data = JSON.parse('{{ username_list|escapejs }}');
        console.log(notes_data);
        console.log(username_data);
    </script>

{% endblock %}