{% extends "file_creator/base.html" %}
{% load static %}

{% block title %}
    Статистика
{% endblock %}

{% block body %}

    <div class="max-w-6xl mx-auto p-6">
        <h2 class="mb-6 text-center">Статистика обработки файлов</h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 ">
            <!-- Карточка: Обработано файлов -->
            <div class="aspect-square bg-form-color dark:bg-form-color-dark shadow-xl rounded-xl p-6 flex flex-col justify-around border border-accent dark:border-accent-dark hover:scale-105 transition-all duration-500">
                <div>
                    <h3 class="text-center text-text dark:text-text-dark">Обработано файлов</h3>
                </div>
                <div class="text-4xl font-bold text-primary dark:text-primary-dark mt-4 text-center">
                    <span class="count-up" data-target="{{ total_files }}">0</span>
                </div>
            </div>
            <!-- Карточка: Самый продуктивный день -->
            <div class="aspect-square bg-form-color dark:bg-form-color-dark shadow-xl rounded-xl p-6 flex flex-col justify-around border border-accent dark:border-accent-dark hover:scale-105 transition-all duration-500">
                <div>
                    <h3 class="text-center text-text dark:text-text-dark">Самый тяжелый день</h3>
                </div>
                <div class="mt-4 space-y-3">
                    <!-- Самый тяжелый день — только число -->
                    {% if best_day %}
                    <p class="!text-2xl text-success dark:text-success-dark font-medium text-center">
                        {{ best_day|date:"d.m.Y" }}
                    </p>
                    <p class="!text-4xl font-bold text-primary dark:text-primary-dark text-center">
                        <span class="count-up" data-target="{{ best_day_total }}">0</span>
                    </p>
                    {% else %}
                    <p class="text-secondary dark:text-secondary-dark text-center">Нет данных</p>
                    {% endif %}
                </div>

            </div>

            <!-- Карточка: Сэкономлено времени -->
            <div class="aspect-square bg-form-color dark:bg-form-color-dark shadow-xl rounded-xl p-6 flex flex-col justify-around border border-accent dark:border-accent-dark hover:scale-105 transition-all duration-500">
                <div>
                    <h3 class="text-center text-text dark:text-text-dark">Сэкономлено времени</h3>
                </div>
                <div class="text-4xl font-bold text-primary dark:text-primary-dark mt-4 text-center">
                    <span class="count-up" data-target="{{ coffee_cups }}">0</span>
                    круж{{ coffee_cups|pluralize:"ка,ки,ек" }} кофе ☕
                </div>
            </div>


        </div>
    </div>






{% endblock %}
{% block extra_js %}
    {% if VITE_DEV_MODE %}
        <script type="module" src="http://localhost:5173/src/statistics_app/js/main.js"></script>
    {% else %}
        <script type="module" crossorigin src="{% static 'statistics_app/js/main.js' %}"></script>
    {% endif %}

{% endblock %}
